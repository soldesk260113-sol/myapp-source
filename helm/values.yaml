# myapp에 대한 기본값입니다.
# 이 파일은 YAML 형식입니다.
# 템플릿으로 전달될 변수들을 여기서 선언합니다.

replicaCount: 2

image:
  repository: 10.2.2.40:5000/library/integrated-dashboard
  pullPolicy: Always
  # 차트의 기본 appVersion 대신 사용할 이미지 태그를 덮어씁니다.
  tag: "latest"

imagePullSecrets:
  - name: harbor-secret
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  # 서비스 계정을 생성할지 여부를 지정합니다.
  create: true
  # 서비스 계정에 추가할 어노테이션(Annotations)입니다.
  annotations: {}
  # 사용할 서비스 계정의 이름입니다.
  # 설정하지 않고 create가 true일 경우, fullname 템플릿을 사용하여 이름이 자동 생성됩니다.
  name: ""

podAnnotations: {}

podSecurityContext: {}
  # fsGroup: 2000 (볼륨 마운트 시 파일 소유 그룹 ID)

securityContext: {}
  # capabilities:
  #   drop:
  #   - ALL (모든 권한 제거)
  # readOnlyRootFilesystem: true (루트 파일 시스템을 읽기 전용으로 설정)
  # runAsNonRoot: true (루트 권한으로 실행 금지)
  # runAsUser: 1000 (컨테이너를 실행할 사용자 ID)

service:
  type: ClusterIP
  port: 80
  targetPort: 3000
  # nodePort: 

ingress:
  enabled: true
  className: "nginx"
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true" (TLS 인증서 자동 발급 관련)
  # ✅ 중요: IP(10.2.2.101)를 그대로 쓰면 다른 API들과 충돌합니다.
  # PC의 hosts 파일에 "10.2.2.101 dashboard.local" 을 추가해서 접속하세요.
  hosts:
    - host: "10.2.2.101"
      paths:
        - path: /
          pathType: Prefix

resources:
  limits:
    cpu: 200m
    memory: 256Mi
  requests:
    cpu: 100m
    memory: 128Mi

nodeSelector: {}

tolerations: []

affinity:
  nodeAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      nodeSelectorTerms:
      - matchExpressions:
        - key: role
          operator: In
          values:
          - web

env:
  NODE_ENV: production

# ⚠️ 주의: 애플리케이션에 '/health' 라는 경로가 실제로 구현되어 있어야 합니다.
# 만약 단순 정적 웹사이트라면 path를 '/'로 변경하는 것이 좋습니다.

livenessProbe:
  httpGet:
    path: /health
    port: 3000
  initialDelaySeconds: 60
  periodSeconds: 20
  failureThreshold: 3

readinessProbe:
  httpGet:
    path: /health
    port: 3000
  initialDelaySeconds: 30
  periodSeconds: 10
  failureThreshold: 3